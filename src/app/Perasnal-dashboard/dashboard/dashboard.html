<!-- Blue gradient top section -->
<section class="px-3">
  <div class="w-full bg-gradient-to-b from-[#0E8ABE] to-[#87D6F7] rounded-b-lg py-10">
    <div class="max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 px-6">
      
      <!-- Active projects -->
      <div class="bg-white rounded-lg p-5 shadow-sm">
        <div class="flex items-center justify-between">
          <div class="gap-2">
            <div class="w-8 h-8 border border-gray-300 rounded-lg flex items-center justify-center">
              <!-- clock icon -->
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8 4.25V8H11.75M8 14.75C4.27208 14.75 1.25 11.7279 1.25 8C1.25 4.27208 4.27208 1.25 8 1.25C11.7279 1.25 14.75 4.27208 14.75 8C14.75 11.7279 11.7279 14.75 8 14.75Z"
                      stroke="#454648" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="flex items-center gap-4 mt-5">
              <span class="text-[14px] text-gray-700 font-medium">Active projects</span>
              <!-- info icon -->
              <svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7.02218 10.1666V6.61102M7 1.49976C3.68629 1.49976 1 4.18605 1 7.49976C1 10.8135 3.68629 13.4998 7 13.4998C10.3137 13.4998 13 10.8135 13 7.49976C13 4.18605 10.3137 1.49976 7 1.49976ZM7.04431 4.83324V4.7888L7.00004 4.78871V4.83324H7.04431Z"
                      stroke="#6A6B6D" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
        </div>
        <p class="text-2xl font-bold mt-3 text-gray-800">{{ activeProjects }}</p>
      </div>

      <!-- Approvals -->
      <div class="bg-white rounded-lg p-5 shadow-sm">
        <div class="flex items-center justify-between">
          <div class="gap-2">
            <div class="w-8 h-8 border border-gray-300 rounded-lg flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                   stroke-width="1.6" stroke="#6b7280" class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round"
                      d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <div class="flex items-center gap-4 mt-5">
              <span class="text-[14px] text-gray-700 font-medium">Approvals</span>
              <svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7.02218 10.1666V6.61102M7 1.49976C3.68629 1.49976 1 4.18605 1 7.49976C1 10.8135 3.68629 13.4998 7 13.4998C10.3137 13.4998 13 10.8135 13 7.49976C13 4.18605 10.3137 1.49976 7 1.49976ZM7.04431 4.83324V4.7888L7.00004 4.78871V4.83324H7.04431Z"
                      stroke="#6A6B6D" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
        </div>
        <p class="text-2xl font-bold mt-3 text-gray-800">{{ approvals }}</p>
      </div>

      <!-- Messages -->
      <div class="bg-white rounded-lg p-5 shadow-sm">
        <div class="flex items-center justify-between">
          <div class="gap-2">
            <div class="w-8 h-8 border border-gray-300 rounded-lg flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none"
                   viewBox="0 0 24 24" stroke-width="1.6" stroke="#6b7280" class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round"
                      d="M8 10h.01M12 10h.01M16 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <div class="flex items-center gap-4 mt-5">
              <span class="text-[14px] text-gray-700 font-medium">Messages</span>
              <svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7.02218 10.1666V6.61102M7 1.49976C3.68629 1.49976 1 4.18605 1 7.49976C1 10.8135 3.68629 13.4998 7 13.4998C10.3137 13.4998 13 10.8135 13 7.49976C13 4.18605 10.3137 1.49976 7 1.49976ZM7.04431 4.83324V4.7888L7.00004 4.78871V4.83324H7.04431Z"
                      stroke="#6A6B6D" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
        </div>
        <p class="text-2xl font-bold mt-3 text-gray-800">{{ messagesCount }}</p>
      </div>

      <!-- Escrow Balance -->
      <div class="bg-white rounded-lg p-5 shadow-sm">
        <div class="flex items-center justify-between">
          <div class="gap-2">
            <div class="w-8 h-8 border border-gray-300 rounded-lg flex items-center justify-center">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                   xmlns="http://www.w3.org/2000/svg">
                <path d="M13 9H7" stroke="#6A6B6D" stroke-width="1.5"
                      stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M22.0002 10.9702V13.0302C22.0002 13.5802 21.5602 14.0302 21.0002 14.0502H19.0402C17.9602 14.0502 16.9702 13.2602 16.8802 12.1802C16.8202 11.5502 17.0602 10.9602 17.4802 10.5502C17.8502 10.1702 18.3602 9.9502 18.9202 9.9502H21.0002C21.5602 9.9702 22.0002 10.4202 22.0002 10.9702Z"
                      stroke="#6A6B6D" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M17.48 10.55C17.06 10.96 16.82 11.55 16.88 12.18C16.97 13.26 17.96 14.05 19.04 14.05H21V15.5C21 18.5 19 20.5 16 20.5H7C4 20.5 2 18.5 2 15.5V8.5C2 5.78 3.64 3.88 6.19 3.56C6.45 3.52 6.72 3.5 7 3.5H16C16.26 3.5 16.51 3.50999 16.75 3.54999C19.33 3.84999 21 5.76 21 8.5V9.95001H18.92C18.36 9.95001 17.85 10.17 17.48 10.55Z"
                      stroke="#6A6B6D" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="flex items-center gap-4 mt-5">
              <span class="text-[14px] text-gray-700 font-medium">Escrow Balance</span>
              <svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7.02218 10.1666V6.61102M7 1.49976C3.68629 1.49976 1 4.18605 1 7.49976C1 10.8135 3.68629 13.4998 7 13.4998C10.3137 13.4998 13 10.8135 13 7.49976C13 4.18605 10.3137 1.49976 7 1.49976ZM7.04431 4.83324V4.7888L7.00004 4.78871V4.83324H7.04431Z"
                      stroke="#6A6B6D" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
        </div>
        <p class="text-2xl font-bold mt-3 text-gray-800">
          {{ escrowBalanceEUR | currency:'EUR':'symbol':'1.0-1' }}
        </p>
      </div>

    </div>
  </div>
</section>

<!-- Table Section -->
<section class="mx-auto mt-[-18px] px-3 sm:px-6 overflow-x-auto">
  <div class="bg-white w-full rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.05)] overflow-hidden">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 p-4 sm:p-6">
      <div>
        <h2 class="text-lg font-semibold text-gray-800">My Projects</h2>
        <p class="text-sm text-gray-500">Overview of all your renovation projects</p>
      </div>
      <button class="flex items-center justify-center gap-2 bg-sky-500 hover:bg-sky-600 text-white text-sm font-medium px-4 py-2.5 rounded-lg transition w-full sm:w-auto" routerLink="/persnal-dashboard/create-project">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/>
        </svg>
        New project
      </button>
    </div>

    <div class="overflow-x-auto">
      <table class="min-w-full text-sm text-gray-700">
        <thead class="bg-gray-50 text-xs uppercase font-semibold text-gray-500">
          <tr>
            <th class="px-6 py-3 text-left">Projects</th>
            <th class="px-6 py-3 text-left">Contractor</th>
            <th class="px-6 py-3 text-left">Status</th>
            <th class="px-6 py-3 text-left">Progress</th>
            <th class="px-6 py-3 text-left">Escrow</th>
            <th class="px-6 py-3 text-left">Deadline</th>
          </tr>
        </thead>

        <tbody class="divide-y divide-gray-100">
          <tr *ngFor="let p of projects" routerLink="/persnal-dashboard/persnal-details" class="cursor-pointer">
            <!-- Project -->
            <td class="px-6 py-4 font-medium text-gray-800 whitespace-nowrap">
              {{ p.name }}
            </td>

            <!-- Contractor -->
            <td class="px-6 py-4 whitespace-nowrap">
              {{ p.contractor }}
            </td>

            <!-- Status badge -->
            <td class="px-6 py-4 whitespace-nowrap">
              <span class="inline-flex items-center px-3 py-1 text-xs font-medium border rounded-full"
                    [ngClass]="statusBadgeClasses(p.status)">
                <svg *ngIf="p.status !== 'completed'" xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 mr-1"
                     fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3"/>
                </svg>
                <svg *ngIf="p.status === 'completed'" xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 mr-1"
                     fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                </svg>
                {{ statusLabel(p.status) }}
              </span>
            </td>

            <!-- Progress -->
            <td class="px-6 py-4 whitespace-nowrap">
              <div class="flex items-center gap-3">
                <div class="w-32 h-2 bg-gray-100 rounded-full overflow-hidden">
                  <div class="h-2 bg-sky-400 rounded-full" [style.width.%]="p.progress"></div>
                </div>
                <span class="text-xs text-gray-500">{{ p.progress }}%</span>
              </div>
              <div class="text-xs text-gray-400 mt-1">{{ p.milestonesDone }}/{{ p.milestonesTotal }} milestones</div>
            </td>

            <!-- Escrow -->
            <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-800">
              {{ p.escrowEUR | currency:'EUR':'symbol':'1.0-0' }}
            </td>

            <!-- Deadline -->
            <td class="px-6 py-4 whitespace-nowrap"
                [ngClass]="{ 'text-gray-400 italic': !p.deadline, 'text-gray-700': !!p.deadline }">
              <ng-container *ngIf="p.deadline; else noDate">
                {{ p.deadline | date:'dd-MM-yyyy HH:mm' }}
              </ng-container>
              <ng-template #noDate>Not available</ng-template>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
</section>
